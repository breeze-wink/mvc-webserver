2024-07-06 23:01:24 INFO /home/breeze1/mvc-webserver/src/engine/workflow.cpp:35 load workflow success: /home/breeze1/mvc-webserver/config/workflow.xml
2024-07-06 23:01:24 DEBUG /home/breeze1/mvc-webserver/src/thread/thread_pool.cpp:15 thread pool create worker threads: 64
2024-07-06 23:01:24 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:12 create socket success!
2024-07-06 23:01:24 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:45 socket bind success: ip = 0.0.0.0, port = 8080
2024-07-06 23:01:24 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:56 socket listening ...
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a51a0
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e50976d0, task=e50a51a0
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a51a0
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e50978c0, task=e50a51a0
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:01:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a5370
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509a6f0, task=e50a5370
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 7, msg = 
GET /file HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = index
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/web/response.cpp:105 template path : /home/breeze1/mvc-webserver/template/file/index.html
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a5370
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509a8c0, task=e50a5370
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a5540
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509aab0, task=e50a5540
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a5540
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509aca0, task=e50a5540
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:01:30 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a5710
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509ae90, task=e50a5710
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
POST /file/upload HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Content-Length: 990
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
Origin: http://192.168.29.130:8080
Content-Type: multipart/form-data; boundary=----WebKitFormBoundarymMNTxEoREI3XK2fL
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a5710
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509b080, task=e50a5710
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
------WebKitFormBoundarymMNTxEoREI3XK2fL
Content-Disposition: form-data; name="file"; filename="test.c"
Content-Type: text/plain

#include <stdio.h>
#define N 12
struct student 
{  
  char num[10];
  int  score;
};

int fun( struct student *s, int n)
{
/**********Program**********/
  int con;
  int i;
  double ave,sum=0;//ÇóºÍ±äÁ¿sum³õÖµÎª0
  for(i=0;i<n;i++)   
  	sum=sum+s[i].score;
  ave=sum/n;
  printf("ave = %lf\n", ave);
  for(con=i=0;i<n;i++)//Í³¼Æ¸öÊıcon³õÖµÎª0
    if(s[i].score<ave)
    {
    	con++;
    	printf("num: %s, score = %d\n", s[i].num, s[i].score);
	}
  return con;
/**********  End  **********/
}
int main()
{ 
 struct student s[N]={{"GA05",85},{"GA03",76},{"GA02",69},{"GA04",85},  
                 {"GA01",91},{"GA07",82},{"GA08",64},{"GA06",57},           
				{"GA09",60},{"GA11",93},{"GA12",83},{"GA10",90}};
 printf("ÓĞ%dÈËµÍÓÚÆ½¾ù·Ö\n",fun(s,N)); 
 return 0;       
}


------WebKitFormBoundarymMNTxEoREI3XK2fL--

2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file/upload
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = upload
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a5710
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509b270, task=e50a5710
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:01:39 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a7ce0
2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509b460, task=e50a7ce0
2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 7, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a7ce0
2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509b650, task=e50a7ce0
2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:01:49 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a7ef0
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509b840, task=e50a7ef0
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
POST /file/upload HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Content-Length: 3932
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
Origin: http://192.168.29.130:8080
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary9GZyEYvuphmiHN5Z
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a7ef0
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509ba30, task=e50a7ef0
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
------WebKitFormBoundary9GZyEYvuphmiHN5Z
Content-Disposition: form-data; name="file"; filename="åŸºç¡€ç®—æ³•è®°å½•.md"
Content-Type: application/octet-stream

# åŸºç¡€ç®—æ³•

## ä¸€äº›å¸¸ç”¨çš„æŸ¥æ‰¾ä¸æ’åºç®—æ³•

### å¿«é€Ÿæ’åº
```C++
void quick_sort(int q[], int l, int r)
{
    if (l >= r) return;

    int i = l - 1, j = r + 1, x = q[l + r >> 1];
    while (i < j)
    {
        do i ++ ; while (q[i] < x);
        do j -- ; while (q[j] > x);
        if (i < j) swap(q[i], q[j]);
    }
    quick_sort(q, l, j), quick_sort(q, j + 1, r);
}

```

### å½’å¹¶æ’åº
```C++
void merge_sort(int q[], int l, int r)
{
    if (l >= r) return;

    int mid = l + r >> 1;
    merge_sort(q, l, mid);
    merge_sort(q, mid + 1, r);

    int k = 0, i = l, j = mid + 1;
    while (i <= mid && j <= r)
        if (q[i] <= q[j]) tmp[k ++ ] = q[i ++ ];
        else tmp[k ++ ] = q[j ++ ];

    while (i <= mid) tmp[k ++ ] = q[i ++ ];
    while (j <= r) tmp[k ++ ] = q[j ++ ];

    for (i = l, j = 0; i <= r; i ++, j ++ ) q[i] = tmp[j];
}

```

### äºŒåˆ†

#### æ•´æ•°äºŒåˆ†
```C++
bool check(int x) {/* ... */} // æ£€æŸ¥xæ˜¯å¦æ»¡è¶³æŸç§æ€§è´¨

// åŒºé—´[l, r]è¢«åˆ’åˆ†æˆ[l, mid]å’Œ[mid + 1, r]æ—¶ä½¿ç”¨ï¼š
int bsearch_1(int l, int r)
{
    while (l < r)
    {
        int mid = l + r >> 1;
        if (check(mid)) r = mid;    // check()åˆ¤æ–­midæ˜¯å¦æ»¡è¶³æ€§è´¨
        else l = mid + 1;
    }
    return l;
}
// åŒºé—´[l, r]è¢«åˆ’åˆ†æˆ[l, mid - 1]å’Œ[mid, r]æ—¶ä½¿ç”¨ï¼š
int bsearch_2(int l, int r)
{
    while (l < r)
    {
        int mid = l + r + 1 >> 1;
        if (check(mid)) l = mid;
        else r = mid - 1;
    }
    return l;
}

```

#### æµ®ç‚¹æ•°äºŒåˆ†

``` C++
bool check(double x) {/* ... */} // æ£€æŸ¥xæ˜¯å¦æ»¡è¶³æŸç§æ€§è´¨

double bsearch_3(double l, double r)
{
    const double eps = 1e-6;   // eps è¡¨ç¤ºç²¾åº¦ï¼Œå–å†³äºé¢˜ç›®å¯¹ç²¾åº¦çš„è¦æ±‚
    while (r - l > eps)
    {
        double mid = (l + r) / 2;
        if (check(mid)) r = mid;
        else l = mid;
    }
    return l;
}

```

## é«˜ç²¾åº¦è®¡ç®—

#### é«˜ç²¾åº¦åŠ æ³•
```C++
// C = A + B, A >= 0, B >= 0
vector<int> add(vector<int> &A, vector<int> &B)
{
    if (A.size() < B.size()) return add(B, A);

    vector<int> C;
    int t = 0;
    for (int i = 0; i < A.size(); i ++ )
    {
        t += A[i];
        if (i < B.size()) t += B[i];
        C.push_back(t % 10);
        t /= 10;
    }

    if (t) C.push_back(t);
    return C;
}

```

#### é«˜ç²¾åº¦å‡æ³•

```C++
// C = A - B, æ»¡è¶³A >= B, A >= 0, B >= 0
vector<int> sub(vector<int> &A, vector<int> &B)
{
    vector<int> C;
    for (int i = 0, t = 0; i < A.size(); i ++ )
    {
        t = A[i] - t;
        if (i < B.size()) t -= B[i];
        C.push_back((t + 10) % 10);
        if (t < 0) t = 1;
        else t = 0;
    }

    while (C.size() > 1 && C.back() == 0) C.pop_back();
    return C;
}

```
#### é«˜ç²¾åº¦ä¹˜ä½ç²¾åº¦
```C++
// C = A * b, A >= 0, b >= 0
vector<int> mul(vector<int> &A, int b)
{
    vector<int> C;

    int t = 0;
    for (int i = 0; i < A.size() || t; i ++ )
    {
        if (i < A.size()) t += A[i] * b;
        C.push_back(t % 10);
        t /= 10;
    }

    while (C.size() > 1 && C.back() == 0) C.pop_back();

    return C;
}

```

#### é«˜ç²¾åº¦é™¤ä»¥ä½ç²¾åº¦
```C++
// A / b = C ... r, A >= 0, b > 0
vector<int> div(vector<int> &A, int b, int &r)
{
    vector<int> C;
    r = 0;
    for (int i = A.size() - 1; i >= 0; i -- )
    {
        r = r * 10 + A[i];
        C.push_back(r / b);
        r %= b;
    }
    reverse(C.begin(), C.end());
    while (C.size() > 1 && C.back() == 0) C.pop_back();
    return C;
}

```

## ä½è¿ç®—
æ±‚nçš„ç¬¬kä½æ•°å­—:  n >> k & 1
è¿”å›nçš„æœ€åä¸€ä½1ï¼š lowbit(n) = n & -n

------WebKitFormBoundary9GZyEYvuphmiHN5Z--

2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file/upload
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = upload
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a7ef0
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509bc20, task=e50a7ef0
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:02:23 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:06:29 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: e50a8100
2024-07-06 23:06:29 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=e509be10, task=e50a8100
2024-07-06 23:06:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:06:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:06:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:13:25 INFO /home/breeze1/mvc-webserver/src/engine/workflow.cpp:35 load workflow success: /home/breeze1/mvc-webserver/config/workflow.xml
2024-07-06 23:13:25 DEBUG /home/breeze1/mvc-webserver/src/thread/thread_pool.cpp:15 thread pool create worker threads: 64
2024-07-06 23:13:25 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:12 create socket success!
2024-07-06 23:13:25 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:45 socket bind success: ip = 0.0.0.0, port = 8080
2024-07-06 23:13:25 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:56 socket listening ...
2024-07-06 23:13:32 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:13:32 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:13:32 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 555801a0
2024-07-06 23:13:32 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=555726d0, task=555801a0
2024-07-06 23:13:32 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:13:32 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:14:58 ERROR /home/breeze1/mvc-webserver/src/socketHandler/socket_handler.cpp:37 epoll wait error: errno = 4, errmsg = Interrupted system call
2024-07-06 23:15:15 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:17:33 INFO /home/breeze1/mvc-webserver/src/engine/workflow.cpp:35 load workflow success: /home/breeze1/mvc-webserver/config/workflow.xml
2024-07-06 23:17:33 DEBUG /home/breeze1/mvc-webserver/src/thread/thread_pool.cpp:15 thread pool create worker threads: 64
2024-07-06 23:17:33 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:12 create socket success!
2024-07-06 23:17:33 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:45 socket bind success: ip = 0.0.0.0, port = 8080
2024-07-06 23:17:33 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:56 socket listening ...
2024-07-06 23:17:42 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:17:42 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:17:42 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 555801a0
2024-07-06 23:17:42 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=555726d0, task=555801a0
2024-07-06 23:17:42 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:17:42 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /file HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:17:50 ERROR /home/breeze1/mvc-webserver/src/socketHandler/socket_handler.cpp:37 epoll wait error: errno = 4, errmsg = Interrupted system call
2024-07-06 23:17:50 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:17:50 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file
2024-07-06 23:17:50 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = index
2024-07-06 23:17:50 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:17:50 DEBUG /home/breeze1/mvc-webserver/src/web/response.cpp:105 template path : /home/breeze1/mvc-webserver/template/file/index.html
2024-07-06 23:17:50 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:98 http task destroy
2024-07-06 23:34:24 INFO /home/breeze1/mvc-webserver/src/engine/workflow.cpp:35 load workflow success: /home/breeze1/mvc-webserver/config/workflow.xml
2024-07-06 23:34:24 DEBUG /home/breeze1/mvc-webserver/src/thread/thread_pool.cpp:15 thread pool create worker threads: 64
2024-07-06 23:34:24 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:12 create socket success!
2024-07-06 23:34:24 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:45 socket bind success: ip = 0.0.0.0, port = 8080
2024-07-06 23:34:24 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:56 socket listening ...
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741eb1a0
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741dd6d0, task=741eb1a0
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /file HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = index
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/web/response.cpp:105 template path : /home/breeze1/mvc-webserver/template/file/index.html
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741eb1a0
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741dd8c0, task=741eb1a0
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741eb370
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e06f0, task=741eb370
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 7, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741eb370
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e08c0, task=741eb370
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:34:29 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741eb540
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e0ab0, task=741eb540
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
POST /file/upload HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Content-Length: 18595
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
Origin: http://192.168.29.130:8080
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary3tYEqUL7LBcba0m9
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5

------WebKitFormBoundary3tYEqUL7LBcba0m9
Content-Disposition: form-data; name="file"; filename="cspå‡†å¤‡.md"
Content-Type: application/octet-stream

# STL-Algorithm



- `sort`ï¼šæ’åºã€‚`sort(v.begin(), v.end(), cmp)` æˆ– `sort(a + begin, a + end, cmp)`ï¼Œå…¶ä¸­ `end` æ˜¯æ’åºçš„æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„åä¸€ä½ï¼Œ`cmp` ä¸ºè‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°ã€‚

- `stable_sort`ï¼šç¨³å®šæ’åºï¼Œç”¨æ³•åŒ `sort()`ã€‚

- `nth_element`ï¼šæŒ‰æŒ‡å®šèŒƒå›´è¿›è¡Œåˆ†ç±»ï¼Œå³æ‰¾å‡ºåºåˆ—ä¸­ç¬¬ ![n](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) å¤§çš„å…ƒç´ ï¼Œä½¿å…¶å·¦è¾¹å‡ä¸ºå°äºå®ƒçš„æ•°ï¼Œå³è¾¹å‡ä¸ºå¤§äºå®ƒçš„æ•°ã€‚`nth_element(v.begin(), v.begin() + mid, v.end(), cmp)` æˆ– `nth_element(a + begin, a + begin + mid, a + end, cmp)`ã€‚

- `binary_search`ï¼šäºŒåˆ†æŸ¥æ‰¾ã€‚`binary_search(v.begin(), v.end(), value)`ï¼Œå…¶ä¸­ `value` ä¸ºéœ€è¦æŸ¥æ‰¾çš„å€¼ã€‚

- `merge`ï¼šå°†ä¸¤ä¸ªï¼ˆå·²æ’åºçš„ï¼‰åºåˆ— **æœ‰åºåˆå¹¶** åˆ°ç¬¬ä¸‰ä¸ªåºåˆ—çš„ **æ’å…¥è¿­ä»£å™¨** ä¸Šã€‚`merge(v1.begin(), v1.end(), v2.begin(), v2.end() ,back_inserter(v3))`ã€‚

- `inplace_merge`ï¼šå°†ä¸¤ä¸ªï¼ˆå·²æŒ‰å°äºè¿ç®—ç¬¦æ’åºçš„ï¼‰ï¼š`[first,middle), [middle,last)` èŒƒå›´ **åŸåœ°åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºåºåˆ—**ã€‚`inplace_merge(v.begin(), v.begin() + middle, v.end())`ã€‚

- `lower_bound`ï¼šåœ¨ä¸€ä¸ªæœ‰åºåºåˆ—ä¸­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œè¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ª **å¤§äºç­‰äº**xçš„å…ƒç´ çš„ä½ç½®çš„è¿­ä»£å™¨ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å…ƒç´ ï¼Œåˆ™è¿”å›å°¾è¿­ä»£å™¨ã€‚`lower_bound(v.begin(),v.end(),x)`ã€‚

- `upper_bound`ï¼šåœ¨ä¸€ä¸ªæœ‰åºåºåˆ—ä¸­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œè¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ª **å¤§äº**xçš„å…ƒç´ çš„ä½ç½®çš„è¿­ä»£å™¨ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å…ƒç´ ï¼Œåˆ™è¿”å›å°¾è¿­ä»£å™¨ã€‚`upper_bound(v.begin(),v.end(),x)`ã€‚

- `next_permutation`ï¼šå°†å½“å‰æ’åˆ—æ›´æ”¹ä¸º **å…¨æ’åˆ—ä¸­çš„ä¸‹ä¸€ä¸ªæ’åˆ—**ã€‚å¦‚æœå½“å‰æ’åˆ—å·²ç»æ˜¯ **å…¨æ’åˆ—ä¸­çš„æœ€åä¸€ä¸ªæ’åˆ—**ï¼ˆå…ƒç´ å®Œå…¨ä»å¤§åˆ°å°æ’åˆ—ï¼‰ï¼Œå‡½æ•°è¿”å› `false` å¹¶å°†æ’åˆ—æ›´æ”¹ä¸º **å…¨æ’åˆ—ä¸­çš„ç¬¬ä¸€ä¸ªæ’åˆ—**ï¼ˆå…ƒç´ å®Œå…¨ä»å°åˆ°å¤§æ’åˆ—ï¼‰ï¼›å¦åˆ™ï¼Œå‡½æ•°è¿”å› `true`ã€‚`next_permutation(v.begin(), v.end())` æˆ– `next_permutation(v + begin, v + end)`ã€‚

  ```c++
  int N = 9, a[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};
  do {
    for (int i = 0; i < N; i++) cout << a[i] << " ";
    cout << endl;
  } while (next_permutation(a, a + N));
  
  ```

  

- `prev_permutation`ï¼šå°†å½“å‰æ’åˆ—æ›´æ”¹ä¸º **å…¨æ’åˆ—ä¸­çš„ä¸Šä¸€ä¸ªæ’åˆ—**ã€‚ç”¨æ³•åŒ `next_permutation`ã€‚

- `partial_sum`

  ```c++
  vector<int> src = {1, 2, 3, 4, 5}, dst;
  // æ±‚è§£srcä¸­å…ƒç´ çš„å‰ç¼€å’Œï¼Œdst[i] = src[0] + ... + src[i]
  // back_inserter å‡½æ•°ä½œç”¨åœ¨ dst å®¹å™¨ä¸Šï¼Œæä¾›ä¸€ä¸ªè¿­ä»£å™¨
  partial_sum(src.begin(), src.end(), back_inserter(dst));
  for (unsigned int i = 0; i < dst.size(); i++) cout << dst[i] << " ";
  
  ```



# prim

```c++
#include <iostream>
#include <algorithm>
#include <cstring>
#include <queue>

using namespace std;

const int N = 400010;
typedef pair<int, int> PII;

int e[N], ne[N], w[N], h[N], idx;
int d[N];
bool st[N];
int n, m;
int res;

void add(int a, int b, int c)
{
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx ++;
}

void prim()
{
    memset(d, 0x3f, sizeof d);

    int cnt = 0;
    priority_queue<PII, vector<PII>, greater<PII>> heap;
    heap.push(make_pair(0, 1));
    d[1] = 0;
    while(heap.size())
    {
        auto p = heap.top();
        heap.pop();
        int ver = p.second, dist = p.first;
        if(st[ver]) continue;

        st[ver] = true;
        res += dist;
        cnt ++;

        for(int i = h[ver]; i != -1; i = ne[i])
        {
            int j = e[i];
            if(d[j] > w[i])
            {
                d[j] = w[i];
                heap.push(make_pair(d[j], j));
            }
        }
    }

    if(cnt < n) res = -1;

}

int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0), cout.tie(0);

    memset(h, -1, sizeof h);

    cin >> n >> m;

    while(m --)
    {
        int a, b, c;
        cin >> a >> b >> c;
        add(a, b, c);
        add(b, a, c);
    }

    prim();

    if(res != -1) cout << res << endl;
    else puts("orz");

    return 0;
}


```

# dijkstra

```c++
#include <iostream>
#include <algorithm>
#include <cstring>
#include <queue>

using namespace std;
typedef pair<int, int> PII;

const int N = 100010, M = 200010;
int e[M], h[M], ne[M], w[M], idx;
int n, m, s;
bool st[N];
int d[N];

void add(int a, int b, int c)
{
    e[idx] = b;
    w[idx] = c;
    ne[idx] = h[a];
    h[a] = idx ++;
}

void Dijkstra()
{
    memset(d, 0x3f, sizeof d);
    d[s] = 0;
    priority_queue<PII, vector<PII>, greater<PII>> heap;
    heap.push({0, 1});

    while(heap.size())
    {
        auto p = heap.top();
        heap.pop();

        int ver = p.second;
        int dist = p.first;

        if(st[ver]) continue;
        st[ver] = true;

        for(int i = h[ver]; i != -1; i = ne[i])
        {
            int j = e[i];
            if(d[j] > dist + w[i])
            {
                d[j] = dist + w[i];
                heap.push({d[j], j});
            }
        }
    }
}

int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0), cout.tie(0);

    cin >> n >> m >> s;

    memset(h, -1, sizeof h);

    while(m --)
    {
        int a, b, c;
        cin >> a >> b >> c;
        add(a, b, c);
    }

    Dijkstra();

    for(int i = 1; i <= n; ++ i)
    {
        printf("%d ", d[i]);
    }

    return 0;
}

```

# Kruskal

```c++
#include <iostream>
#include <algorithm>
#include <cstring>

using namespace std;

const int N = 100010, M = 200010, INF = 0x3f3f3f3f;

struct Edge{
    int a, b, w;
    bool operator < (const Edge &e) const
    {
        return w < e.w;
    }
}edges[M];
int p[N], cnt;
int n, m;

int find(int x)
{
    if(p[x] != x) p[x] = find(p[x]);
    return p[x];
}

int kruskal()
{
    int res = 0;
    
    for(int i = 1; i <= n; ++ i) p[i] = i;
    
    sort(edges, edges + m);
    
    for(int i = 0; i < m; ++ i)
    {
        auto e = edges[i];
        int a = e.a, b = e.b;
        
        a = find(a), b = find(b);
        
        if(a != b)
        {
            res += e.w;
            p[a] = b;
            cnt ++;
        }
    }
    if(cnt == n - 1) return res;
    else return INF;
}

int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0), cout.tie(0);
    
    cin >> n >> m;
    
    for(int i = 0; i < m; ++ i)
    {
        int a, b, w;
        cin >> a >> b >> w;
        edges[i] = {a, b, w};
    }
    
    int res = kruskal();
    
    if(res == INF) cout << "impossible" << endl;
    else cout << res << endl;
    
    return 0;
}
```



# KMP

```C++
// s[]æ˜¯é•¿æ–‡æœ¬ï¼Œp[]æ˜¯æ¨¡å¼ä¸²ï¼Œnæ˜¯sçš„é•¿åº¦ï¼Œmæ˜¯pçš„é•¿åº¦
æ±‚æ¨¡å¼ä¸²çš„Nextæ•°ç»„ï¼š
for (int i = 2, j = 0; i <= m; i ++ )
{
    while (j && p[i] != p[j + 1]) j = ne[j];
    if (p[i] == p[j + 1]) j ++ ;
    ne[i] = j;
}

// åŒ¹é…
for (int i = 1, j = 0; i <= n; i ++ )
{
    while (j && s[i] != p[j + 1]) j = ne[j];
    if (s[i] == p[j + 1]) j ++ ;
    if (j == m)
    {
        j = ne[j];
        // åŒ¹é…æˆåŠŸåçš„é€»è¾‘
    }
}

```

# Trieæ ‘
```C++
int son[N][26], cnt[N], idx;
// 0å·ç‚¹æ—¢æ˜¯æ ¹èŠ‚ç‚¹ï¼Œåˆæ˜¯ç©ºèŠ‚ç(­_¾
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741eb540
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e0ca0, task=741eb540
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
‚¹
// son[][]å­˜å‚¨æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹
// cnt[]å­˜å‚¨ä»¥æ¯ä¸ªèŠ‚ç‚¹ç»“å°¾çš„å•è¯æ•°é‡

// æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²
void insert(char *str)
{
    int p = 0;
    for (int i = 0; str[i]; i ++ )
    {
        int u = str[i] - 'a';
        if (!son[p][u]) son[p][u] = ++ idx;
        p = son[p][u];
    }
    cnt[p] ++ ;
}

// æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°
int query(char *str)
{
    int p = 0;
    for (int i = 0; str[i]; i ++ )
    {
        int u = str[i] - 'a';
        if (!son[p][u]) return 0;
        p = son[p][u];
    }
    return cnt[p];
}

```

# å¹¶æŸ¥é›†
**(1)æœ´ç´ å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N]; //å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x) p[x] = find(p[x]);
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ ) p[i] = i;

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    p[find(a)] = find(b);

```
**(2)ç»´æŠ¤sizeçš„å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N], size[N];
    //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, size[]åªæœ‰ç¥–å®—èŠ‚ç‚¹çš„æœ‰æ„ä¹‰ï¼Œè¡¨ç¤ºç¥–å®—èŠ‚ç‚¹æ‰€åœ¨é›†åˆä¸­çš„ç‚¹çš„æ•°é‡

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x) p[x] = find(p[x]);
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ )
    {
        p[i] = i;
        size[i] = 1;
    }

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    size[find(b)] += size[find(a)];
    p[find(a)] = find(b);

```
**(3)ç»´æŠ¤åˆ°ç¥–å®—èŠ‚ç‚¹è·ç¦»çš„å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N], d[N];
    //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, d[x]å­˜å‚¨xåˆ°p[x]çš„è·ç¦»

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x)
        {
            int u = find(p[x]);
            d[x] += d[p[x]];
            p[x] = u;
        }
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ )
    {
        p[i] = i;
        d[i] = 0;
    }

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    p[find(a)] = find(b);
    d[find(a)] = distance; // æ ¹æ®å…·ä½“é—®é¢˜ï¼Œåˆå§‹åŒ–find(a)çš„åç§»é‡
```

# äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°

```c++
int lowbit(int x)
{
    return x & -x;
}
```

# è¡¨è¾¾å¼æ±‚å€¼

```c++
#include<iostream>
#include<algorithm>
#include<stack>
#include<unordered_map>

using namespace std;

stack<int> num;
stack<char> op;

void eval()
{
    int b = num.top(); num.pop();
    int a = num.top(); num.pop();
    char o = op.top(); op.pop();
    
    int res = 0;
    
    if(o == '+') res = a + b;
    else if(o == '-') res = a - b;
    else if(o == '*') res = a * b;
    else res = a / b;
    
    num.push(res);
}

int main()
{
    string in;
    unordered_map<char, int> pr{{'+', 1}, {'-', 1}, {'*', 2}, {'/', 2}};
    
    cin >> in;
    for(int i = 0; i < in.size(); ++ i)
    {
        char c = in[i];
        
        if(isdigit(c))
        {
            int j = i;
            int res = 0;
            while(j < in.size() && isdigit(in[j]))
            {
                res = res * 10 + (in[j ++] - '0');
            }
            i = j - 1;
            num.push(res);
        }
        else if(c == '(') op.push(c);
        else if(c == ')')
        {
            while(op.size() && op.top() != '(') eval();
            
            op.pop();
        }
        
        else
        {
            while(op.size() && op.top() != '(' && pr[op.top()] >= pr[c]) eval();
            op.push(c);
        }
    }
    
    while(op.size()) eval();
    
    cout << num.top() << endl;
    
    return 0;
}
```

# spfaåˆ¤è´Ÿç¯

```c++
#include<iostream>
#include<cstring>
#include<queue>

using namespace std;

const int N = 2010, M = 10010;

int h[N], e[M], ne[M], w[M], idx;
int dist[N], cnt[N], n, m;
bool st[N];

void add(int a, int b, int c)
{
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx ++;
}

bool spfa()
{
    queue<int> q;
    for(int i = 1; i <= n; i++) q.push(i), st[i] = true;
    
    while(q.size())
    {

2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741eb540
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e0e90, task=741eb540
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
        int t = q. front();
        q.pop();
        
        st[t] = false;
        
        for(int i = h[t]; i != -1; i = ne[i])
        {
            int j = e[i];
            if(dist[t] + w[i] < dist[j])
            {
                dist[j] = dist[t] + w[i];
                cnt[j] = cnt[t] + 1;
                if(cnt[j] >= n) return true;
                if(!st[j])
                {
                    st[j] = true;
                    q.push(j);
                }
            }
        }
    }
    return false;
}


int main()
{
    memset(h, -1, sizeof h);
    
    cin >> n >> m;
    while(m -- )
    {
        int a, b, c;
        cin >> a >> b >>c;
        add(a, b, c);
    }
    
    if(spfa()) puts("Yes");
    else puts("No");
}
```

# è¯•é™¤æ³•åˆ†è§£è´¨å› æ•°

```c++
void divide(int x)
{
    for (int i = 2; i <= x / i; i ++ )
        if (x % i == 0)
            {
                int s = 0;
                while (x % i == 0) x /= i, s ++ ;
                cout << i << ' ' << s << endl;
            }
    if (x > 1) cout << x << ' ' << 1 << endl;
    cout << endl;
}
```

# åŸƒæ°ç­›æ³•æ±‚è´¨æ•°

```c++
int primes[N], cnt; // primes[]å­˜å‚¨æ‰€æœ‰ç´ æ•°
bool st[N]; // st[x]å­˜å‚¨xæ˜¯å¦è¢«ç­›æ‰
void get_primes(int n)
{
    for (int i = 2; i <= n; i ++ )
    {
        if (st[i]) continue;
        primes[cnt ++ ] = i;
        for (int j = i + i; j <= n; j += i)
       		st[j] = true;
    }
}
```

# gcd, lcm

```c++
#include<numeric>

int main()
{
    int n, m;
    int gcd = __gcd(n, m);
    int lcm = n * m / gcd;
}
```

# å¿«é€Ÿå¹‚

```c++
æ±‚ m^k mod pï¼Œæ—¶é—´å¤æ‚åº¦ O(logk)ã€‚
mä¸ºåº•æ•°ï¼Œkä¸ºå¹‚
int qmi(int m, int k, int p)
{
    int res = 1 % p, t = m;
    while (k)
    {
        if (k&1) res = res * t % p;
        t = t * t % p;
        k >>= 1;
    }
    return res;
}
```

# èƒŒåŒ…

## 01èƒŒåŒ…

```c++
#include <iostream>
using namespace std;

const int N = 1010;
int n, m;

int f[N];
int main()
{
    cin >> n >> m;
    
    for(int i = 1; i <= n; ++ i)
    {
        int v, w;
        cin >> v >> w;
        for(int j = m; j >= v; --j)
            f[j] = max(f[j], f[j - v] + w);
    }
    
    cout << f[m] << endl;
    
    return 0;
}
```

## å®Œå…¨èƒŒåŒ…

```c++
#include<iostream>
using namespace std;

const int N = 1010;
int v[N], w[N], f[N];
int n, m;

int main(){
    cin >> n >> m;
    for(int i = 1; i <= n; i ++) cin >> v[i] >> w[i];

    for(int i = 1; i <= n; i ++){
        for(int j = v[i]; j <= m; j ++){
            f[j] = max(f[j], f[j - v[i]] + w[i]);
        }
    }
    cout << f[m] << endl;
    return 0;
}

```

## å¤šé‡èƒŒåŒ…

```c++
#include<iostream>

using namespace std;

const int N = 12000, M = 2010;

int v[N], w[N], f[M];
int n, m, cnt;

int main(){
    cin >> n >> m;
    
    for(int i = 1; i <= n; i ++){
        int a, b, s;
        cin >> a >> b >> s;
        int k = 1;
        while(k <= s){
            cnt ++;
            v[cnt] = a * k;
            w[cnt] = b * k;
            s -= k;
            k *= 2;
        }
        if(s){
            cnt ++;
            v[cnt] = a * s;
            w[cnt] = b * s;
        }
    }
        
    n = cnt;
    for(int i = 1; i <= n; i ++)
        for(int j = m; j >= v[i]; j --)
             f[j] = max(f[j], f[j - v[i]]  + w[i]);
        
    cout << f[m] << endl;
    return 0;
}
```

## åˆ†ç»„èƒŒåŒ…

```c++
#include<iostream>

using namespace std;

const int N = 110;

int f[N], w[N][N], v[N][N], s[N];
int n, m;

int main(){
    cin >> n >> m;
    
    for(int i = 1; i <= n; i ++){
        cin >> s[i];
        for(int j = 1; j <= s[i]; j ++){
            cin >> v[i][j] >> w[i][j];
        }
    }
    
    for(int i = 1; i <= n; i ++){
        for(int j = m; j >= 0; j --){
            for(int k = 1; k <= s[i]; k ++)
                if(v[i][k] <= j) f[j] = max(f[j], f[j - v[i][k]] + w[i][k]);
        }
    }
    
    cout << f[m];
    
    return 0;
}
```

# å¤§æ•°æ®æœ€é•¿ä¸Šå‡å­åºåˆ—

```c++
#include<iostream>
#include<algorithm>

using namespace std;

const int N = 100010;
int q[N], a[N];
int n;

int find(int x, int len){
    int l = 0, r = len;
    while(l < r){
        int mid = l + r >> 1;

        if(q[mid] >= x) r = mid;
        else l = mid + 1;
    }
    
    return l;
}

int main(){
    cin >> n;
    for(int i = 0; i < n; i ++) cin >> a[i];
    
    int len = 0;
    
    for(int i = 0; i < n; i ++){
        int j = find(a[i], len); // å¾—åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äºa[i]çš„æ•°çš„ä¸‹æ ‡
        
        len = max(len, j + 1); // å¦‚æœjä¸ç­‰äºlenå°±æ— æ³•æ›´æ–°ï¼Œå¦‚æœç­‰äºlenå°±åŠ 1
    
        q[j] = a[i];
    }
    
    cout << len;
    
    return 0;
}

```

# æœ€é•¿å…¬å…±å­åºåˆ—

```c++
#include<iostream>
using namespace std;

const int N = 1010;
int n, m;
char a[N], b[N];
int f[N][N];

int main(){
    cin >> n >> m;
    cin >> a + 1 >> b + 1;
    for(int i = 1; i <= n; i ++){
        for(int j = 1; j <= m; j ++){
            f[i][j] = max(f[i - 1][j], f[i][j - 1]);
            if(a[i] == b[j]){
                f[i][j] = max(f[i - 1][j - 1] + 1, f[i][j]);
            }
        }
    }
    
    cout << f[n][m];
    
    return 0;
}
```

# ç¼–è¾‘è·ç¦»

**ç»™å®š nä¸ªé•¿åº¦ä¸è¶…è¿‡ 1010 çš„å­—ç¬¦ä¸²ä»¥åŠ mæ¬¡è¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ç»™å‡ºä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªæ“ä½œæ¬¡æ•°ä¸Šé™ã€‚**

**å¯¹äºæ¯æ¬¡è¯¢é—®ï¼Œè¯·ä½ æ±‚å‡ºç»™å®šçš„ nä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªå­—ç¬¦ä¸²å¯ä»¥åœ¨ä¸Šé™æ“ä½œæ¬¡æ•°å†…ç»è¿‡æ“ä½œå˜æˆè¯¢é—®ç»™å‡ºçš„å­—ç¬¦ä¸²ã€‚**

**æ¯ä¸ªå¯¹å­—ç¬¦ä¸²è¿›è¡Œçš„å•ä¸ªå­—ç¬¦çš„æ’å…¥ã€åˆ é™¤æˆ–æ›¿æ¢ç®—ä½œä¸€æ¬¡æ“ä½œ.**

```c++
#include<iostream>
#include<cstring>
#include<algorithm>

using namespace std;
const int N = 1010, M = 15;
int n, m;
string str[N];
int f[M][M];

bool check(string str, string s, int k){
    memset(f, 0, sizeof f);
    int a = str.size(), b = s.size();
    for(int i = 1; i <= a; i ++) f[i][0] = i;
    for(int i = 1; i <= b; i ++) f[0][i] = i;
    
    for(int i = 1; i <= a; i ++){
        for(int j = 1; j <= b; j ++){
            f[i][j] = min(f[i - 1][j] + 1, f[i][j - 1] + 1);
            
            if(str[i - 1] == s[j - 1]) f[i][j] = min(f[i][j], f[i - 1][j - 1]);
            else f[i][j] = min(f[i][j], f[i - 1][j - 1] + 1);
        }
    }
    return f[a][b] <= k;
}

int main(){
    cin >> n >> m;
    for(int i = 0; i < n; i ++) cin >> str[i];
    while(m --){
        int num = 0, k;
        string s;
        cin >> s >> k;
        for(int i = 0; i < n; i ++){
            if(check(str[i], s, k)) num ++;
        }
        cout << num << endl;
    }
}
```


------WebKitFormBoundary3tYEqUL7LBcba0m9--

2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/web/request.cpp:110 ready to upload
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:96 name = file
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:104 filename=
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:131 upload content: 

2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file/upload
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = upload
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741eb540
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e1080, task=741eb540
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:34:43 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741ebc30
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e1270, task=741ebc30
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741ebe00
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e1460, task=741ebe00
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741ebe00
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e1650, task=741ebe00
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:35:57 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741ec010
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e1840, task=741ec010
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 7, msg = 
POST /file/upload HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Content-Length: 4521
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
Origin: http://192.168.29.130:8080
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryvPAHpOY9B3udc4c6
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5

------WebKitFormBoundaryvPAHpOY9B3udc4c6
Content-Disposition: form-data; name="file"; filename="æ•°æ®ç»“æ„.md"
Content-Type: application/octet-stream

# æ•°æ®ç»“æ„é«˜çº§ç®—æ³•

## KMP
```C++
// s[]æ˜¯é•¿æ–‡æœ¬ï¼Œp[]æ˜¯æ¨¡å¼ä¸²ï¼Œnæ˜¯sçš„é•¿åº¦ï¼Œmæ˜¯pçš„é•¿åº¦
æ±‚æ¨¡å¼ä¸²çš„Nextæ•°ç»„ï¼š
for (int i = 2, j = 0; i <= m; i ++ )
{
    while (j && p[i] != p[j + 1]) j = ne[j];
    if (p[i] == p[j + 1]) j ++ ;
    ne[i] = j;
}

// åŒ¹é…
for (int i = 1, j = 0; i <= n; i ++ )
{
    while (j && s[i] != p[j + 1]) j = ne[j];
    if (s[i] == p[j + 1]) j ++ ;
    if (j == m)
    {
        j = ne[j];
        // åŒ¹é…æˆåŠŸåçš„é€»è¾‘
    }
}

```

## Trieæ ‘
```C++
int son[N][26], cnt[N], idx;
// 0å·ç‚¹æ—¢æ˜¯æ ¹èŠ‚ç‚¹ï¼Œåˆæ˜¯ç©ºèŠ‚ç‚¹
// son[][]å­˜å‚¨æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹
// cnt[]å­˜å‚¨ä»¥æ¯ä¸ªèŠ‚ç‚¹ç»“å°¾çš„å•è¯æ•°é‡

// æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²
void insert(char *str)
{
    int p = 0;
    for (int i = 0; str[i]; i ++ )
    {
        int u = str[i] - 'a';
        if (!son[p][u]) son[p][u] = ++ idx;
        p = son[p][u];
    }
    cnt[p] ++ ;
}

// æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°
int query(char *str)
{
    int p = 0;
    for (int i = 0; str[i]; i ++ )
    {
        int u = str[i] - 'a';
        if (!son[p][u]) return 0;
        p = son[p][u];
    }
    return cnt[p];
}

```

## å¹¶æŸ¥é›†
**(1)æœ´ç´ å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N]; //å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x) p[x] = find(p[x]);
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ ) p[i] = i;

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    p[find(a)] = find(b);

```
**(2)ç»´æŠ¤sizeçš„å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N], size[N];
    //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, size[]åªæœ‰ç¥–å®—èŠ‚ç‚¹çš„æœ‰æ„ä¹‰ï¼Œè¡¨ç¤ºç¥–å®—èŠ‚ç‚¹æ‰€åœ¨é›†åˆä¸­çš„ç‚¹çš„æ•°é‡

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x) p[x] = find(p[x]);
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ )
    {
        p[i] = i;
        size[i] = 1;
    }

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    size[find(b)] += size[find(a)];
    p[find(a)] = find(b);

```
**(3)ç»´æŠ¤åˆ°ç¥–å®—èŠ‚ç‚¹è·ç¦»çš„å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N], d[N];
    //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, d[x]å­˜å‚¨xåˆ°p[x]çš„è·ç¦»

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x)
        {
            int u = find(p[x]);
            d[x] += d[p[x]];
            p[x] = u;
        }
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ )
    {
        p[i] = i;
        d[i] = 0;
    }

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    p[find(a)] = find(b);
    d[find(a)] = distance; // æ ¹æ®å…·ä½“é—®é¢˜ï¼Œåˆå§‹åŒ–find(a)çš„åç§»é‡
```

## å †
```C++
// h[N]å­˜å‚¨å †ä¸­çš„å€¼, h[1]æ˜¯å †é¡¶ï¼Œxçš„å·¦å„¿å­æ˜¯2x, å³å„¿å­æ˜¯2x + 1
// ph[k]å­˜å‚¨ç¬¬kä¸ªæ’å…¥çš„ç‚¹åœ¨å †ä¸­çš„ä½ç½®
// hp[k]å­˜å‚¨å †ä¸­ä¸‹æ ‡æ˜¯kçš„ç‚¹æ˜¯ç¬¬å‡ ä¸ªæ’å…¥çš„
int h[N], ph[N], hp[N], size;

// äº¤æ¢ä¸¤ä¸ªç‚¹ï¼ŒåŠå…¶æ˜ å°„å…³ç³»
void heap_swap(int a, int b)
{
    swap(ph[hp[a]],ph[hp[b]]);
    swap(hp[a], hp[b]);
    swap(h[a], h[b]);
}

void down(int u)
{
    int t = u;
    if (u * 2 <= size && h[u * 2] < h[t]) t = u * 2;
    if (u * 2 + 1 <= size && h[u * 2 + 1] < h[t]) t = u * 2 + 1;
    if (u != t)
    {
        heap_swap(u, t);
        down(t);
    }
}

void up(int u)
{
    while (u / 2 && h[u] < h[u / 2])
    {
        heap_swap(u, u / 2);
        u >>= 1;
    }
}

// O(n)å»ºå †
for (int i = n / 2; i; i -- ) down(i);

```
## å­—ç¬¦ä¸²å“ˆå¸Œ
```C++
æ ¸å¿ƒæ€æƒ³ï¼šå°†å­—ç¬¦ä¸²çœ‹æˆPè¿›åˆ¶æ•°ï¼ŒPçš„ç»éªŒå€¼æ˜¯131æˆ–13331ï¼Œå–è¿™ä¸¤ä¸ªå€¼çš„å†²çªæ¦‚ç‡ä½
å°æŠ€å·§ï¼šå–æ¨¡çš„æ•°ç”¨2^64ï¼Œè¿™æ ·ç›´æ¥ç”¨unsigned long longå­˜å‚¨ï¼Œæº¢å‡ºçš„ç»“æœå°±æ˜¯å–æ¨¡çš„ç»“æœ

typedef unsigned long long ULL;
ULL h[N], p[N]; // h[k]å­˜å‚¨å­—ç¬¦ä¸²å‰kä¸ªå­—æ¯çš„å“ˆå¸Œå€¼, p[k]å­˜å‚¨ P^k mod 2^64

// åˆå§‹åŒ–
p[0] = 1;
for (int i = 1; i <= n; i ++ )
{
    h[i] = h[i - 1] * P + str[i];
    p[i] = p[i - 1] * P;
}

// è®¡ç®—å­ä¸² str[l ~ r] çš„å“ˆå¸Œå€¼
ULL get(int l, int r)
{
    return h[r] - h[l - 1] * p[r - l + 1];
}


```
------WebKitFormBoundaryvPAHpOY9B3udc4c6--

2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/web/request.cpp:110 ready to upload
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:96 name = file
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:104 filename=
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:131 upload content: 

2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file/upload
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = upload
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 741ec010
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=741e1a30, task=741ec010
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:36:07 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:40:54 INFO /home/breeze1/mvc-webserver/src/engine/workflow.cpp:35 load workflow success: /home/breeze1/mvc-webserver/config/workflow.xml
2024-07-06 23:40:54 DEBUG /home/breeze1/mvc-webserver/src/thread/thread_pool.cpp:15 thread pool create worker threads: 64
2024-07-06 23:40:54 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:12 create socket success!
2024-07-06 23:40:54 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:45 socket bind success: ip = 0.0.0.0, port = 8080
2024-07-06 23:40:54 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:56 socket listening ...
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 8afee1a0
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=8afe06d0, task=8afee1a0
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 8afee1a0
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=8afe08c0, task=8afee1a0
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:41:10 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 8afee370
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=8afe36f0, task=8afee370
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 7, msg = 
POST /file/upload HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Content-Length: 4521
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
Origin: http://192.168.29.130:8080
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryQLMSAtG62eXrUjE9
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5

------WebKitFormBoundaryQLMSAtG62eXrUjE9
Content-Disposition: form-data; name="file"; filename="æ•°æ®ç»“æ„.md"
Content-Type: application/octet-stream

# æ•°æ®ç»“æ„é«˜çº§ç®—æ³•

## KMP
```C++
// s[]æ˜¯é•¿æ–‡æœ¬ï¼Œp[]æ˜¯æ¨¡å¼ä¸²ï¼Œnæ˜¯sçš„é•¿åº¦ï¼Œmæ˜¯pçš„é•¿åº¦
æ±‚æ¨¡å¼ä¸²çš„Nextæ•°ç»„ï¼š
for (int i = 2, j = 0; i <= m; i ++ )
{
    while (j && p[i] != p[j + 1]) j = ne[j];
    if (p[i] == p[j + 1]) j ++ ;
    ne[i] = j;
}

// åŒ¹é…
for (int i = 1, j = 0; i <= n; i ++ )
{
    while (j && s[i] != p[j + 1]) j = ne[j];
    if (s[i] == p[j + 1]) j ++ ;
    if (j == m)
    {
        j = ne[j];
        // åŒ¹é…æˆåŠŸåçš„é€»è¾‘
    }
}

```

## Trieæ ‘
```C++
int son[N][26], cnt[N], idx;
// 0å·ç‚¹æ—¢æ˜¯æ ¹èŠ‚ç‚¹ï¼Œåˆæ˜¯ç©ºèŠ‚ç‚¹
// son[][]å­˜å‚¨æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹
// cnt[]å­˜å‚¨ä»¥æ¯ä¸ªèŠ‚ç‚¹ç»“å°¾çš„å•è¯æ•°é‡

// æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²
void insert(char *str)
{
    int p = 0;
    for (int i = 0; str[i]; i ++ )
    {
        int u = str[i] - 'a';
        if (!son[p][u]) son[p][u] = ++ idx;
        p = son[p][u];
    }
    cnt[p] ++ ;
}

// æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°
int query(char *str)
{
    int p = 0;
    for (int i = 0; str[i]; i ++ )
    {
        int u = str[i] - 'a';
        if (!son[p][u]) return 0;
        p = son[p][u];
    }
    return cnt[p];
}

```

## å¹¶æŸ¥é›†
**(1)æœ´ç´ å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N]; //å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x) p[x] = find(p[x]);
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ ) p[i] = i;

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    p[find(a)] = find(b);

```
**(2)ç»´æŠ¤sizeçš„å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N], size[N];
    //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, size[]åªæœ‰ç¥–å®—èŠ‚ç‚¹çš„æœ‰æ„ä¹‰ï¼Œè¡¨ç¤ºç¥–å®—èŠ‚ç‚¹æ‰€åœ¨é›†åˆä¸­çš„ç‚¹çš„æ•°é‡

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x) p[x] = find(p[x]);
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ )
    {
        p[i] = i;
        size[i] = 1;
    }

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    size[find(b)] += size[find(a)];
    p[find(a)] = find(b);

```
**(3)ç»´æŠ¤åˆ°ç¥–å®—èŠ‚ç‚¹è·ç¦»çš„å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N], d[N];
    //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, d[x]å­˜å‚¨xåˆ°p[x]çš„è·ç¦»

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x)
        {
            int u = find(p[x]);
            d[x] += d[p[x]];
            p[x] = u;
        }
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ )
    {
        p[i] = i;
        d[i] = 0;
    }

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    p[find(a)] = find(b);
    d[find(a)] = distance; // æ ¹æ®å…·ä½“é—®é¢˜ï¼Œåˆå§‹åŒ–find(a)çš„åç§»é‡
```

## å †
```C++
// h[N]å­˜å‚¨å †ä¸­çš„å€¼, h[1]æ˜¯å †é¡¶ï¼Œxçš„å·¦å„¿å­æ˜¯2x, å³å„¿å­æ˜¯2x + 1
// ph[k]å­˜å‚¨ç¬¬kä¸ªæ’å…¥çš„ç‚¹åœ¨å †ä¸­çš„ä½ç½®
// hp[k]å­˜å‚¨å †ä¸­ä¸‹æ ‡æ˜¯kçš„ç‚¹æ˜¯ç¬¬å‡ ä¸ªæ’å…¥çš„
int h[N], ph[N], hp[N], size;

// äº¤æ¢ä¸¤ä¸ªç‚¹ï¼ŒåŠå…¶æ˜ å°„å…³ç³»
void heap_swap(int a, int b)
{
    swap(ph[hp[a]],ph[hp[b]]);
    swap(hp[a], hp[b]);
    swap(h[a], h[b]);
}

void down(int u)
{
    int t = u;
    if (u * 2 <= size && h[u * 2] < h[t]) t = u * 2;
    if (u * 2 + 1 <= size && h[u * 2 + 1] < h[t]) t = u * 2 + 1;
    if (u != t)
    {
        heap_swap(u, t);
        down(t);
    }
}

void up(int u)
{
    while (u / 2 && h[u] < h[u / 2])
    {
        heap_swap(u, u / 2);
        u >>= 1;
    }
}

// O(n)å»ºå †
for (int i = n / 2; i; i -- ) down(i);

```
## å­—ç¬¦ä¸²å“ˆå¸Œ
```C++
æ ¸å¿ƒæ€æƒ³ï¼šå°†å­—ç¬¦ä¸²çœ‹æˆPè¿›åˆ¶æ•°ï¼ŒPçš„ç»éªŒå€¼æ˜¯131æˆ–13331ï¼Œå–è¿™ä¸¤ä¸ªå€¼çš„å†²çªæ¦‚ç‡ä½
å°æŠ€å·§ï¼šå–æ¨¡çš„æ•°ç”¨2^64ï¼Œè¿™æ ·ç›´æ¥ç”¨unsigned long longå­˜å‚¨ï¼Œæº¢å‡ºçš„ç»“æœå°±æ˜¯å–æ¨¡çš„ç»“æœ

typedef unsigned long long ULL;
ULL h[N], p[N]; // h[k]å­˜å‚¨å­—ç¬¦ä¸²å‰kä¸ªå­—æ¯çš„å“ˆå¸Œå€¼, p[k]å­˜å‚¨ P^k mod 2^64

// åˆå§‹åŒ–
p[0] = 1;
for (int i = 1; i <= n; i ++ )
{
    h[i] = h[i - 1] * P + str[i];
    p[i] = p[i - 1] * P;
}

// è®¡ç®—å­ä¸² str[l ~ r] çš„å“ˆå¸Œå€¼
ULL get(int l, int r)
{
    return h[r] - h[l - 1] * p[r - l + 1];
}


```
------WebKitFormBoundaryQLMSAtG62eXrUjE9--

2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/web/request.cpp:110 ready to upload
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:96 name = file
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:104 filename=
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:131 upload content: 

2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file/upload
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = upload
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 8afee370
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=8afe38c0, task=8afee370
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:41:18 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:45:51 INFO /home/breeze1/mvc-webserver/src/engine/workflow.cpp:35 load workflow success: /home/breeze1/mvc-webserver/config/workflow.xml
2024-07-06 23:45:51 DEBUG /home/breeze1/mvc-webserver/src/thread/thread_pool.cpp:15 thread pool create worker threads: 64
2024-07-06 23:45:51 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:12 create socket success!
2024-07-06 23:45:51 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:45 socket bind success: ip = 0.0.0.0, port = 8080
2024-07-06 23:45:51 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:56 socket listening ...
2024-07-06 23:45:58 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:45:58 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:45:59 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 640df1a0
2024-07-06 23:45:59 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=640d16d0, task=640df1a0
2024-07-06 23:45:59 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:45:59 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:45:59 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:45:59 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 640df1a0
2024-07-06 23:45:59 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=640d18c0, task=640df1a0
2024-07-06 23:45:59 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:45:59 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:45:59 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 640df370
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=640d46f0, task=640df370
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 7, msg = 
GET /file HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = index
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/web/response.cpp:105 template path : /home/breeze1/mvc-webserver/template/file/index.html
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 640df370
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=640d48c0, task=640df370
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 640df540
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=640d4ab0, task=640df540
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 640df540
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=640d4ca0, task=640df540
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:46:02 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 640df710
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=640d4e90, task=640df710
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
POST /file/upload HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Content-Length: 4521
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
Origin: http://192.168.29.130:8080
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryDGMCAGUmZJ6sxkoG
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5

------WebKitFormBoundaryDGMCAGUmZJ6sxkoG
Content-Disposition: form-data; name="file"; filename="æ•°æ®ç»“æ„.md"
Content-Type: application/octet-stream

# æ•°æ®ç»“æ„é«˜çº§ç®—æ³•

## KMP
```C++
// s[]æ˜¯é•¿æ–‡æœ¬ï¼Œp[]æ˜¯æ¨¡å¼ä¸²ï¼Œnæ˜¯sçš„é•¿åº¦ï¼Œmæ˜¯pçš„é•¿åº¦
æ±‚æ¨¡å¼ä¸²çš„Nextæ•°ç»„ï¼š
for (int i = 2, j = 0; i <= m; i ++ )
{
    while (j && p[i] != p[j + 1]) j = ne[j];
    if (p[i] == p[j + 1]) j ++ ;
    ne[i] = j;
}

// åŒ¹é…
for (int i = 1, j = 0; i <= n; i ++ )
{
    while (j && s[i] != p[j + 1]) j = ne[j];
    if (s[i] == p[j + 1]) j ++ ;
    if (j == m)
    {
        j = ne[j];
        // åŒ¹é…æˆåŠŸåçš„é€»è¾‘
    }
}

```

## Trieæ ‘
```C++
int son[N][26], cnt[N], idx;
// 0å·ç‚¹æ—¢æ˜¯æ ¹èŠ‚ç‚¹ï¼Œåˆæ˜¯ç©ºèŠ‚ç‚¹
// son[][]å­˜å‚¨æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹
// cnt[]å­˜å‚¨ä»¥æ¯ä¸ªèŠ‚ç‚¹ç»“å°¾çš„å•è¯æ•°é‡

// æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²
void insert(char *str)
{
    int p = 0;
    for (int i = 0; str[i]; i ++ )
    {
        int u = str[i] - 'a';
        if (!son[p][u]) son[p][u] = ++ idx;
        p = son[p][u];
    }
    cnt[p] ++ ;
}

// æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°
int query(char *str)
{
    int p = 0;
    for (int i = 0; str[i]; i ++ )
    {
        int u = str[i] - 'a';
        if (!son[p][u]) return 0;
        p = son[p][u];
    }
    return cnt[p];
}

```

## å¹¶æŸ¥é›†
**(1)æœ´ç´ å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N]; //å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x) p[x] = find(p[x]);
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ ) p[i] = i;

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    p[find(a)] = find(b);

```
**(2)ç»´æŠ¤sizeçš„å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N], size[N];
    //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, size[]åªæœ‰ç¥–å®—èŠ‚ç‚¹çš„æœ‰æ„ä¹‰ï¼Œè¡¨ç¤ºç¥–å®—èŠ‚ç‚¹æ‰€åœ¨é›†åˆä¸­çš„ç‚¹çš„æ•°é‡

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x) p[x] = find(p[x]);
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ )
    {
        p[i] = i;
        size[i] = 1;
    }

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    size[find(b)] += size[find(a)];
    p[find(a)] = find(b);

```
**(3)ç»´æŠ¤åˆ°ç¥–å®—èŠ‚ç‚¹è·ç¦»çš„å¹¶æŸ¥é›†ï¼š**
```C++
    int p[N], d[N];
    //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, d[x]å­˜å‚¨xåˆ°p[x]çš„è·ç¦»

    // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
    int find(int x)
    {
        if (p[x] != x)
        {
            int u = find(p[x]);
            d[x] += d[p[x]];
            p[x] = u;
        }
        return p[x];
    }

    // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n
    for (int i = 1; i <= n; i ++ )
    {
        p[i] = i;
        d[i] = 0;
    }

    // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š
    p[find(a)] = find(b);
    d[find(a)] = distance; // æ ¹æ®å…·ä½“é—®é¢˜ï¼Œåˆå§‹åŒ–find(a)çš„åç§»é‡
```

## å †
```C++
// h[N]å­˜å‚¨å †ä¸­çš„å€¼, h[1]æ˜¯å †é¡¶ï¼Œxçš„å·¦å„¿å­æ˜¯2x, å³å„¿å­æ˜¯2x + 1
// ph[k]å­˜å‚¨ç¬¬kä¸ªæ’å…¥çš„ç‚¹åœ¨å †ä¸­çš„ä½ç½®
// hp[k]å­˜å‚¨å †ä¸­ä¸‹æ ‡æ˜¯kçš„ç‚¹æ˜¯ç¬¬å‡ ä¸ªæ’å…¥çš„
int h[N], ph[N], hp[N], size;

// äº¤æ¢ä¸¤ä¸ªç‚¹ï¼ŒåŠå…¶æ˜ å°„å…³ç³»
void heap_swap(int a, int b)
{
    swap(ph[hp[a]],ph[hp[b]]);
    swap(hp[a], hp[b]);
    swap(h[a], h[b]);
}

void down(int u)
{
    int t = u;
    if (u * 2 <= size && h[u * 2] < h[t]) t = u * 2;
    if (u * 2 + 1 <= size && h[u * 2 + 1] < h[t]) t = u * 2 + 1;
    if (u != t)
    {
        heap_swap(u, t);
        down(t);
    }
}

void up(int u)
{
    while (u / 2 && h[u] < h[u / 2])
    {
        heap_swap(u, u / 2);
        u >>= 1;
    }
}

// O(n)å»ºå †
for (int i = n / 2; i; i -- ) down(i);

```
## å­—ç¬¦ä¸²å“ˆå¸Œ
```C++
æ ¸å¿ƒæ€æƒ³ï¼šå°†å­—ç¬¦ä¸²çœ‹æˆPè¿›åˆ¶æ•°ï¼ŒPçš„ç»éªŒå€¼æ˜¯131æˆ–13331ï¼Œå–è¿™ä¸¤ä¸ªå€¼çš„å†²çªæ¦‚ç‡ä½
å°æŠ€å·§ï¼šå–æ¨¡çš„æ•°ç”¨2^64ï¼Œè¿™æ ·ç›´æ¥ç”¨unsigned long longå­˜å‚¨ï¼Œæº¢å‡ºçš„ç»“æœå°±æ˜¯å–æ¨¡çš„ç»“æœ

typedef unsigned long long ULL;
ULL h[N], p[N]; // h[k]å­˜å‚¨å­—ç¬¦ä¸²å‰kä¸ªå­—æ¯çš„å“ˆå¸Œå€¼, p[k]å­˜å‚¨ P^k mod 2^64

// åˆå§‹åŒ–
p[0] = 1;
for (int i = 1; i <= n; i ++ )
{
    h[i] = h[i - 1] * P + str[i];
    p[i] = p[i - 1] * P;
}

// è®¡ç®—å­ä¸² str[l ~ r] çš„å“ˆå¸Œå€¼
ULL get(int l, int r)
{
    return h[r] - h[l - 1] * p[r - l + 1];
}


```
------WebKitFormBoundaryDGMCAGUmZJ6sxkoG--

2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/web/request.cpp:110 ready to upload
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file/upload
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = upload
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 640df710
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=640d5080, task=640df710
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:46:05 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:20 INFO /home/breeze1/mvc-webserver/src/engine/workflow.cpp:35 load workflow success: /home/breeze1/mvc-webserver/config/workflow.xml
2024-07-06 23:50:20 DEBUG /home/breeze1/mvc-webserver/src/thread/thread_pool.cpp:15 thread pool create worker threads: 64
2024-07-06 23:50:20 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:12 create socket success!
2024-07-06 23:50:20 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:45 socket bind success: ip = 0.0.0.0, port = 8080
2024-07-06 23:50:20 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:56 socket listening ...
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 1fd41a0
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=1fc66d0, task=1fd41a0
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 1fd41a0
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=1fc68c0, task=1fd41a0
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:50:22 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 1fd4370
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=1fc96f0, task=1fd4370
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 7, msg = 
GET /file HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = index
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/web/response.cpp:105 template path : /home/breeze1/mvc-webserver/template/file/index.html
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 1fd4370
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=1fc98c0, task=1fd4370
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 1fd4540
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=1fc9ab0, task=1fd4540
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 1fd4540
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=1fc9ca0, task=1fd4540
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:50:24 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 1fd4710
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=1fc9e90, task=1fd4710
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
POST /file/upload HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Content-Length: 3850
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
Origin: http://192.168.29.130:8080
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryVnYuIVZi18unpsbi
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5

------WebKitFormBoundaryVnYuIVZi18unpsbi
Content-Disposition: form-data; name="file"; filename="æ­£åˆ™ä¸‰å‰‘å®¢.md"
Content-Type: application/octet-stream

## egrep å‡ ä¸ªå¸¸ç”¨çš„æ¡ˆä¾‹ï¼Œä¾¿äºç†è§£

```bash
//1. åŒ¹é…èº«ä»½è¯: 
    egrep -n '^[0-9]{17}[0-9X]$' filename  // å¦‚æœè¦åœ¨åŒä¸€è¡Œå¤´å°¾åŠ ä¸Š^å’Œ$

//2. åŒ¹é…è´¦å·æ˜¯å¦åˆæ³•ï¼ˆå­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰:
    egrep -n '^[a-zA-Z]\w{4,15}$' filename

//3. åŒ¹é…å¯†ç æ˜¯å¦åˆæ³•ï¼ˆå­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨8-18å­—èŠ‚ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼‰ï¼š
    egrep -n '^[a-zA-Z]\w{7,17}$' filename

//4. åŒ¹é…æ—¥æœŸ ex. 2022-11-23
    egrep -n '^[0-9]{4}-[0-9]{2}-[0-9]{2}$' filename

```
## sed ç¤ºèŒƒ
__(æ³¨æ„å¼€å§‹å’Œæœ«å°¾æœ‰æ²¡æœ‰ / )__

åŠ ä¸Š __-e__ å‚æ•°å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªå‘½ä»¤
åŠ ä¸Š __-n__ å‚æ•°å¯ä»¥åªæ‰“å°ä¿®æ”¹çš„è¡Œæ•°
åŠ ä¸Š __-r__ å‚æ•°ä½¿ç”¨æ‰©å±•æ­£åˆ™æ¯”å¦‚ m __,__ n
åŠ ä¸Š __-i__ å‚æ•°ç›´æ¥ä¿®æ”¹æ–‡æœ¬ï¼Œä¸åŠ çš„è¯åªæ‰“å°ä¿®æ”¹åçš„å†…å®¹ï¼Œä¸ä¿®æ”¹

- (^.\*)è¡¨ç¤ºè¡Œé¦–å¼€å§‹ä¸€ç›´å¾€åç›´åˆ°åˆ†å‰²ç¬¦å·ä¾‹å¦‚_ï¼Œ(.*$)è¡¨ç¤ºç¬¦å·å¼€å§‹ä¸€ç›´åˆ°è¡Œå°¾

__/ /__ ä¸­å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸€èˆ¬ä¸ç”¨ã€‚

```bash

2.sed -i '/pattern/i\insertPattern' fileName è¡¨ç¤ºåœ¨åŒ¹é…patternçš„å‰é¢æ’å…¥ä¸€è¡Œ insertPattern
3.sed -i '/pattern/a\insertPattern' fileName è¡¨ç¤ºåœ¨åŒ¹é…patternçš„åé¢æ’å…¥ä¸€è¡Œ
4.sed -i '/pattern/d' fileName åˆ é™¤
5.sed -i 's/pattern/newPattern/' fileName æ›¿æ¢æ¯è¡Œç¬¬ä¸€ä¸ªåŒ¹é… ï¼ˆå¦‚æœè¦åœ¨æ–°paè¡¨ç¤ºæ›¿æ¢å†…å®¹ç”¨&ï¼‰
  sed -i 's/pattern/newPattern/g' fileName æ›¿æ¢æ¯è¡Œæ‰€æœ‰åŒ¹é…
  sed -r '18,21s#(^.*)_(.*$)#\2_\1#' num.txt sé…åˆ()è¿›è¡Œæ“ä½œï¼Œè°ƒæ¢é¡ºåº, # å’Œ /æ˜¯ä¸€æ ·çš„
  sed -r -i '23,26s/(^.*)/\#\1/' num.txt èŒƒå›´æ·»åŠ ç¬¦å·  


6.sed -r '1,3c "hello world"' fileName è¡¨ç¤ºå°†1-3è¡Œç›´æ¥æ¢æˆhello worldï¼ˆä¸Šé¢çš„så‚æ•°æ›¿æ¢éƒ¨åˆ†å†…å®¹ï¼‰
7.sed -n '/pattern/p' fileName è¾“å‡ºåŒ¹é…çš„è¡Œ
//8.æœ€å‰é¢å‡å¦‚æ•°å­—ä¾‹å¦‚ sed -i '5s/...' (only 5)  æˆ– sed -i '5,10s/...'(from 5 to 10) è¡¨ç¤ºåªå¯¹æŒ‡å®šè¡Œå·è¿›è¡Œæ“ä½œã€‚
```

- å¸¸ç”¨çš„æ—¥å¿—æ–‡ä»¶æŸ¥è¯¢
``` bash
sed -n '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/p' fileName
```
- åˆ é™¤ä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼æ“ä½œ
```bash
sed -r '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/d' fileName
å¦‚æœé€—å·å³è¾¹å†™ $ è¡¨ç¤ºåˆ é™¤åˆ°æœ€åä¸€è¡Œ
```
- åŒä¸Šçš„èŒƒå›´æ›¿æ¢
```bash
sed -r '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/c "hello world' fileName
```

## awk

- awkå‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹
(1)BEGINæŒ‡ä»¤ï¼Œ
(2)è¯»å–æ¯ä¸€è¡Œï¼Œåˆ¤æ–­è¯¥è¡Œæ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œè¿›è¡Œä»€ä¹ˆæ“ä½œã€‚ï¼ˆæŒ‰è¿™ä¸ªé€»è¾‘ç†è§£å°±å¥½ï¼‰
(3)ENDæŒ‡ä»¤ï¼Œ

- -Fè®¾å®šæŸ¥è¯¢åˆ†éš”ç¬¦ï¼Œ-vOFS= è®¾å®šè¾“å‡ºåˆ†éš”ç¬¦
```bash
// å‚æ•°Fåç´§è·Ÿç€åˆ†éš”ç¬¦ï¼ŒNRæ˜¯åˆ¤å®šçš„è¡Œæ•°ï¼Œ$n è¡¨ç¤ºç¬¬nä¸ªæ¨¡å—ï¼Œ$0 è¡¨ç¤ºå…¨éƒ¨ï¼Œ$NF è¡¨ç¤ºæœ€åä¸€ä¸ªæ¨¡å—ï¼ŒNRä¸å†™é»˜è®¤å¯¹å…¨éƒ¨è¡Œæ“ä½œ
awk -F: 'BEGIN{print "this is BEGIN"}NR==1{print $1}NR==4{print $2,$3}END{print "this is END"}' fileName
// ç¬¬ä¸€è¡Œåˆ°ç¬¬äº”è¡Œå¯ä»¥ç”¨ NR==1,NR==5 æˆ–è€… NR>=1&&NR<=5
```

```bash
// å¯ä»¥ç”¨//åƒsedä¸­ä¸€æ ·è¡¨è¾¾èŒƒå›´
awk -F: '/101010/,/202020/{operation}' fileName
```

**é‡ä¸­ä¹‹é‡**
```bash
// å¯¹æŒ‡å®šåˆ—è¿›è¡Œæ­£åˆ™åˆ¤å®šï¼Œå†å¯¹æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ‰€åœ¨çš„è¡Œè¿›è¡Œæ“ä½œã€‚
awk -F: '$4~/^s/{operation}' fileName
// ä¸æ”¯æŒ{m,n}ï¼Œéœ€è¦å…·ä½“åŒ– ç”¨ ||åˆ†éš”
awk -F: '($3~/^[0-9][0-9]$/||$3~/^[0-9]$/){print $1,$3}' passwd
```

- å¦‚æœæƒ³å…ˆç­›é€‰è¡Œå†ç­›é€‰åˆ—ä¸­çš„è¡Œï¼Œå¯ä»¥å°†sed å’Œ awk è”åˆï¼Œä½¿ç”¨ç®¡é“ï¼Œå¦‚ä¸‹
```bash
sed -nr '/101010/,/202020/p' passwd | awk -F: '$3~/^[0-9][0-9]$/{print $1, $3}'
```

**å¸¸è§ç”¨ä¾‹**
- è·å–æ–‡ä»¶è¡Œæ•°
```bash
awk '{sum++}END{print sum}' fileName
```

- ç»Ÿè®¡æŸä¸€åˆ—çš„å’Œ

```bash
awk '{sum+=$2}END{print sum}' fileName
```
------WebKitFormBoundaryVnYuIVZi18unpsbi--

2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/web/request.cpp:110 ready to upload
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:96 name = file
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:104 filename=
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:131 upload content: 

2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file/upload
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = upload
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 1fd4710
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=1fca080, task=1fd4710
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:50:28 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:52 INFO /home/breeze1/mvc-webserver/src/engine/workflow.cpp:35 load workflow success: /home/breeze1/mvc-webserver/config/workflow.xml
2024-07-06 23:50:52 DEBUG /home/breeze1/mvc-webserver/src/thread/thread_pool.cpp:15 thread pool create worker threads: 64
2024-07-06 23:50:52 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:12 create socket success!
2024-07-06 23:50:52 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:45 socket bind success: ip = 0.0.0.0, port = 8080
2024-07-06 23:50:52 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:56 socket listening ...
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 8b2961a0
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=8b2886d0, task=8b2961a0
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 8b2961a0
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=8b2888c0, task=8b2961a0
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:50:54 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 8b296370
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=8b28b6f0, task=8b296370
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 7, msg = 
POST /file/upload HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Content-Length: 3850
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
Origin: http://192.168.29.130:8080
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryxLU4lp7fqAzjBcs9
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5

------WebKitFormBoundaryxLU4lp7fqAzjBcs9
Content-Disposition: form-data; name="file"; filename="æ­£åˆ™ä¸‰å‰‘å®¢.md"
Content-Type: application/octet-stream

## egrep å‡ ä¸ªå¸¸ç”¨çš„æ¡ˆä¾‹ï¼Œä¾¿äºç†è§£

```bash
//1. åŒ¹é…èº«ä»½è¯: 
    egrep -n '^[0-9]{17}[0-9X]$' filename  // å¦‚æœè¦åœ¨åŒä¸€è¡Œå¤´å°¾åŠ ä¸Š^å’Œ$

//2. åŒ¹é…è´¦å·æ˜¯å¦åˆæ³•ï¼ˆå­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰:
    egrep -n '^[a-zA-Z]\w{4,15}$' filename

//3. åŒ¹é…å¯†ç æ˜¯å¦åˆæ³•ï¼ˆå­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨8-18å­—èŠ‚ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼‰ï¼š
    egrep -n '^[a-zA-Z]\w{7,17}$' filename

//4. åŒ¹é…æ—¥æœŸ ex. 2022-11-23
    egrep -n '^[0-9]{4}-[0-9]{2}-[0-9]{2}$' filename

```
## sed ç¤ºèŒƒ
__(æ³¨æ„å¼€å§‹å’Œæœ«å°¾æœ‰æ²¡æœ‰ / )__

åŠ ä¸Š __-e__ å‚æ•°å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªå‘½ä»¤
åŠ ä¸Š __-n__ å‚æ•°å¯ä»¥åªæ‰“å°ä¿®æ”¹çš„è¡Œæ•°
åŠ ä¸Š __-r__ å‚æ•°ä½¿ç”¨æ‰©å±•æ­£åˆ™æ¯”å¦‚ m __,__ n
åŠ ä¸Š __-i__ å‚æ•°ç›´æ¥ä¿®æ”¹æ–‡æœ¬ï¼Œä¸åŠ çš„è¯åªæ‰“å°ä¿®æ”¹åçš„å†…å®¹ï¼Œä¸ä¿®æ”¹

- (^.\*)è¡¨ç¤ºè¡Œé¦–å¼€å§‹ä¸€ç›´å¾€åç›´åˆ°åˆ†å‰²ç¬¦å·ä¾‹å¦‚_ï¼Œ(.*$)è¡¨ç¤ºç¬¦å·å¼€å§‹ä¸€ç›´åˆ°è¡Œå°¾

__/ /__ ä¸­å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸€èˆ¬ä¸ç”¨ã€‚

```bash

2.sed -i '/pattern/i\insertPattern' fileName è¡¨ç¤ºåœ¨åŒ¹é…patternçš„å‰é¢æ’å…¥ä¸€è¡Œ insertPattern
3.sed -i '/pattern/a\insertPattern' fileName è¡¨ç¤ºåœ¨åŒ¹é…patternçš„åé¢æ’å…¥ä¸€è¡Œ
4.sed -i '/pattern/d' fileName åˆ é™¤
5.sed -i 's/pattern/newPattern/' fileName æ›¿æ¢æ¯è¡Œç¬¬ä¸€ä¸ªåŒ¹é… ï¼ˆå¦‚æœè¦åœ¨æ–°paè¡¨ç¤ºæ›¿æ¢å†…å®¹ç”¨&ï¼‰
  sed -i 's/pattern/newPattern/g' fileName æ›¿æ¢æ¯è¡Œæ‰€æœ‰åŒ¹é…
  sed -r '18,21s#(^.*)_(.*$)#\2_\1#' num.txt sé…åˆ()è¿›è¡Œæ“ä½œï¼Œè°ƒæ¢é¡ºåº, # å’Œ /æ˜¯ä¸€æ ·çš„
  sed -r -i '23,26s/(^.*)/\#\1/' num.txt èŒƒå›´æ·»åŠ ç¬¦å·  


6.sed -r '1,3c "hello world"' fileName è¡¨ç¤ºå°†1-3è¡Œç›´æ¥æ¢æˆhello worldï¼ˆä¸Šé¢çš„så‚æ•°æ›¿æ¢éƒ¨åˆ†å†…å®¹ï¼‰
7.sed -n '/pattern/p' fileName è¾“å‡ºåŒ¹é…çš„è¡Œ
//8.æœ€å‰é¢å‡å¦‚æ•°å­—ä¾‹å¦‚ sed -i '5s/...' (only 5)  æˆ– sed -i '5,10s/...'(from 5 to 10) è¡¨ç¤ºåªå¯¹æŒ‡å®šè¡Œå·è¿›è¡Œæ“ä½œã€‚
```

- å¸¸ç”¨çš„æ—¥å¿—æ–‡ä»¶æŸ¥è¯¢
``` bash
sed -n '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/p' fileName
```
- åˆ é™¤ä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼æ“ä½œ
```bash
sed -r '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/d' fileName
å¦‚æœé€—å·å³è¾¹å†™ $ è¡¨ç¤ºåˆ é™¤åˆ°æœ€åä¸€è¡Œ
```
- åŒä¸Šçš„èŒƒå›´æ›¿æ¢
```bash
sed -r '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/c "hello world' fileName
```

## awk

- awkå‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹
(1)BEGINæŒ‡ä»¤ï¼Œ
(2)è¯»å–æ¯ä¸€è¡Œï¼Œåˆ¤æ–­è¯¥è¡Œæ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œè¿›è¡Œä»€ä¹ˆæ“ä½œã€‚ï¼ˆæŒ‰è¿™ä¸ªé€»è¾‘ç†è§£å°±å¥½ï¼‰
(3)ENDæŒ‡ä»¤ï¼Œ

- -Fè®¾å®šæŸ¥è¯¢åˆ†éš”ç¬¦ï¼Œ-vOFS= è®¾å®šè¾“å‡ºåˆ†éš”ç¬¦
```bash
// å‚æ•°Fåç´§è·Ÿç€åˆ†éš”ç¬¦ï¼ŒNRæ˜¯åˆ¤å®šçš„è¡Œæ•°ï¼Œ$n è¡¨ç¤ºç¬¬nä¸ªæ¨¡å—ï¼Œ$0 è¡¨ç¤ºå…¨éƒ¨ï¼Œ$NF è¡¨ç¤ºæœ€åä¸€ä¸ªæ¨¡å—ï¼ŒNRä¸å†™é»˜è®¤å¯¹å…¨éƒ¨è¡Œæ“ä½œ
awk -F: 'BEGIN{print "this is BEGIN"}NR==1{print $1}NR==4{print $2,$3}END{print "this is END"}' fileName
// ç¬¬ä¸€è¡Œåˆ°ç¬¬äº”è¡Œå¯ä»¥ç”¨ NR==1,NR==5 æˆ–è€… NR>=1&&NR<=5
```

```bash
// å¯ä»¥ç”¨//åƒsedä¸­ä¸€æ ·è¡¨è¾¾èŒƒå›´
awk -F: '/101010/,/202020/{operation}' fileName
```

**é‡ä¸­ä¹‹é‡**
```bash
// å¯¹æŒ‡å®šåˆ—è¿›è¡Œæ­£åˆ™åˆ¤å®šï¼Œå†å¯¹æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ‰€åœ¨çš„è¡Œè¿›è¡Œæ“ä½œã€‚
awk -F: '$4~/^s/{operation}' fileName
// ä¸æ”¯æŒ{m,n}ï¼Œéœ€è¦å…·ä½“åŒ– ç”¨ ||åˆ†éš”
awk -F: '($3~/^[0-9][0-9]$/||$3~/^[0-9]$/){print $1,$3}' passwd
```

- å¦‚æœæƒ³å…ˆç­›é€‰è¡Œå†ç­›é€‰åˆ—ä¸­çš„è¡Œï¼Œå¯ä»¥å°†sed å’Œ awk è”åˆï¼Œä½¿ç”¨ç®¡é“ï¼Œå¦‚ä¸‹
```bash
sed -nr '/101010/,/202020/p' passwd | awk -F: '$3~/^[0-9][0-9]$/{print $1, $3}'
```

**å¸¸è§ç”¨ä¾‹**
- è·å–æ–‡ä»¶è¡Œæ•°
```bash
awk '{sum++}END{print sum}' fileName
```

- ç»Ÿè®¡æŸä¸€åˆ—çš„å’Œ

```bash
awk '{sum+=$2}END{print sum}' fileName
```
------WebKitFormBoundaryxLU4lp7fqAzjBcs9--

2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/web/request.cpp:110 ready to upload
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:96 name = file
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:104 filename=
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:131 upload content: 

2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file/upload
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = upload
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: 8b296370
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=8b28b8c0, task=8b296370
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:50:55 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:52:42 INFO /home/breeze1/mvc-webserver/src/engine/workflow.cpp:35 load workflow success: /home/breeze1/mvc-webserver/config/workflow.xml
2024-07-06 23:52:42 DEBUG /home/breeze1/mvc-webserver/src/thread/thread_pool.cpp:15 thread pool create worker threads: 64
2024-07-06 23:52:42 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:12 create socket success!
2024-07-06 23:52:42 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:45 socket bind success: ip = 0.0.0.0, port = 8080
2024-07-06 23:52:42 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:56 socket listening ...
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 7
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: b2e751a0
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=b2e676d0, task=b2e751a0
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 6, msg = 
GET /favicon.ico HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5


2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: b2e751a0
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=b2e678c0, task=b2e751a0
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 6
2024-07-06 23:52:46 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/socketHandler/socket.cpp:86 socket accept success, connfd = 6
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: b2e75370
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=b2e6a6f0, task=b2e75370
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:62 recv: conn = 7, msg = 
POST /file/upload HTTP/1.1
Host: 192.168.29.130:8080
Connection: keep-alive
Content-Length: 3850
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
Origin: http://192.168.29.130:8080
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryyJI0qOsrnZcV8oWM
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://192.168.29.130:8080/file
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5

------WebKitFormBoundaryyJI0qOsrnZcV8oWM
Content-Disposition: form-data; name="file"; filename="æ­£åˆ™ä¸‰å‰‘å®¢.md"
Content-Type: application/octet-stream

## egrep å‡ ä¸ªå¸¸ç”¨çš„æ¡ˆä¾‹ï¼Œä¾¿äºç†è§£

```bash
//1. åŒ¹é…èº«ä»½è¯: 
    egrep -n '^[0-9]{17}[0-9X]$' filename  // å¦‚æœè¦åœ¨åŒä¸€è¡Œå¤´å°¾åŠ ä¸Š^å’Œ$

//2. åŒ¹é…è´¦å·æ˜¯å¦åˆæ³•ï¼ˆå­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰:
    egrep -n '^[a-zA-Z]\w{4,15}$' filename

//3. åŒ¹é…å¯†ç æ˜¯å¦åˆæ³•ï¼ˆå­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨8-18å­—èŠ‚ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼‰ï¼š
    egrep -n '^[a-zA-Z]\w{7,17}$' filename

//4. åŒ¹é…æ—¥æœŸ ex. 2022-11-23
    egrep -n '^[0-9]{4}-[0-9]{2}-[0-9]{2}$' filename

```
## sed ç¤ºèŒƒ
__(æ³¨æ„å¼€å§‹å’Œæœ«å°¾æœ‰æ²¡æœ‰ / )__

åŠ ä¸Š __-e__ å‚æ•°å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªå‘½ä»¤
åŠ ä¸Š __-n__ å‚æ•°å¯ä»¥åªæ‰“å°ä¿®æ”¹çš„è¡Œæ•°
åŠ ä¸Š __-r__ å‚æ•°ä½¿ç”¨æ‰©å±•æ­£åˆ™æ¯”å¦‚ m __,__ n
åŠ ä¸Š __-i__ å‚æ•°ç›´æ¥ä¿®æ”¹æ–‡æœ¬ï¼Œä¸åŠ çš„è¯åªæ‰“å°ä¿®æ”¹åçš„å†…å®¹ï¼Œä¸ä¿®æ”¹

- (^.\*)è¡¨ç¤ºè¡Œé¦–å¼€å§‹ä¸€ç›´å¾€åç›´åˆ°åˆ†å‰²ç¬¦å·ä¾‹å¦‚_ï¼Œ(.*$)è¡¨ç¤ºç¬¦å·å¼€å§‹ä¸€ç›´åˆ°è¡Œå°¾

__/ /__ ä¸­å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸€èˆ¬ä¸ç”¨ã€‚

```bash

2.sed -i '/pattern/i\insertPattern' fileName è¡¨ç¤ºåœ¨åŒ¹é…patternçš„å‰é¢æ’å…¥ä¸€è¡Œ insertPattern
3.sed -i '/pattern/a\insertPattern' fileName è¡¨ç¤ºåœ¨åŒ¹é…patternçš„åé¢æ’å…¥ä¸€è¡Œ
4.sed -i '/pattern/d' fileName åˆ é™¤
5.sed -i 's/pattern/newPattern/' fileName æ›¿æ¢æ¯è¡Œç¬¬ä¸€ä¸ªåŒ¹é… ï¼ˆå¦‚æœè¦åœ¨æ–°paè¡¨ç¤ºæ›¿æ¢å†…å®¹ç”¨&ï¼‰
  sed -i 's/pattern/newPattern/g' fileName æ›¿æ¢æ¯è¡Œæ‰€æœ‰åŒ¹é…
  sed -r '18,21s#(^.*)_(.*$)#\2_\1#' num.txt sé…åˆ()è¿›è¡Œæ“ä½œï¼Œè°ƒæ¢é¡ºåº, # å’Œ /æ˜¯ä¸€æ ·çš„
  sed -r -i '23,26s/(^.*)/\#\1/' num.txt èŒƒå›´æ·»åŠ ç¬¦å·  


6.sed -r '1,3c "hello world"' fileName è¡¨ç¤ºå°†1-3è¡Œç›´æ¥æ¢æˆhello worldï¼ˆä¸Šé¢çš„så‚æ•°æ›¿æ¢éƒ¨åˆ†å†…å®¹ï¼‰
7.sed -n '/pattern/p' fileName è¾“å‡ºåŒ¹é…çš„è¡Œ
//8.æœ€å‰é¢å‡å¦‚æ•°å­—ä¾‹å¦‚ sed -i '5s/...' (only 5)  æˆ– sed -i '5,10s/...'(from 5 to 10) è¡¨ç¤ºåªå¯¹æŒ‡å®šè¡Œå·è¿›è¡Œæ“ä½œã€‚
```

- å¸¸ç”¨çš„æ—¥å¿—æ–‡ä»¶æŸ¥è¯¢
``` bash
sed -n '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/p' fileName
```
- åˆ é™¤ä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼æ“ä½œ
```bash
sed -r '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/d' fileName
å¦‚æœé€—å·å³è¾¹å†™ $ è¡¨ç¤ºåˆ é™¤åˆ°æœ€åä¸€è¡Œ
```
- åŒä¸Šçš„èŒƒå›´æ›¿æ¢
```bash
sed -r '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/c "hello world' fileName
```

## awk

- awkå‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹
(1)BEGINæŒ‡ä»¤ï¼Œ
(2)è¯»å–æ¯ä¸€è¡Œï¼Œåˆ¤æ–­è¯¥è¡Œæ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œè¿›è¡Œä»€ä¹ˆæ“ä½œã€‚ï¼ˆæŒ‰è¿™ä¸ªé€»è¾‘ç†è§£å°±å¥½ï¼‰
(3)ENDæŒ‡ä»¤ï¼Œ

- -Fè®¾å®šæŸ¥è¯¢åˆ†éš”ç¬¦ï¼Œ-vOFS= è®¾å®šè¾“å‡ºåˆ†éš”ç¬¦
```bash
// å‚æ•°Fåç´§è·Ÿç€åˆ†éš”ç¬¦ï¼ŒNRæ˜¯åˆ¤å®šçš„è¡Œæ•°ï¼Œ$n è¡¨ç¤ºç¬¬nä¸ªæ¨¡å—ï¼Œ$0 è¡¨ç¤ºå…¨éƒ¨ï¼Œ$NF è¡¨ç¤ºæœ€åä¸€ä¸ªæ¨¡å—ï¼ŒNRä¸å†™é»˜è®¤å¯¹å…¨éƒ¨è¡Œæ“ä½œ
awk -F: 'BEGIN{print "this is BEGIN"}NR==1{print $1}NR==4{print $2,$3}END{print "this is END"}' fileName
// ç¬¬ä¸€è¡Œåˆ°ç¬¬äº”è¡Œå¯ä»¥ç”¨ NR==1,NR==5 æˆ–è€… NR>=1&&NR<=5
```

```bash
// å¯ä»¥ç”¨//åƒsedä¸­ä¸€æ ·è¡¨è¾¾èŒƒå›´
awk -F: '/101010/,/202020/{operation}' fileName
```

**é‡ä¸­ä¹‹é‡**
```bash
// å¯¹æŒ‡å®šåˆ—è¿›è¡Œæ­£åˆ™åˆ¤å®šï¼Œå†å¯¹æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ‰€åœ¨çš„è¡Œè¿›è¡Œæ“ä½œã€‚
awk -F: '$4~/^s/{operation}' fileName
// ä¸æ”¯æŒ{m,n}ï¼Œéœ€è¦å…·ä½“åŒ– ç”¨ ||åˆ†éš”
awk -F: '($3~/^[0-9][0-9]$/||$3~/^[0-9]$/){print $1,$3}' passwd
```

- å¦‚æœæƒ³å…ˆç­›é€‰è¡Œå†ç­›é€‰åˆ—ä¸­çš„è¡Œï¼Œå¯ä»¥å°†sed å’Œ awk è”åˆï¼Œä½¿ç”¨ç®¡é“ï¼Œå¦‚ä¸‹
```bash
sed -nr '/101010/,/202020/p' passwd | awk -F: '$3~/^[0-9][0-9]$/{print $1, $3}'
```

**å¸¸è§ç”¨ä¾‹**
- è·å–æ–‡ä»¶è¡Œæ•°
```bash
awk '{sum++}END{print sum}' fileName
```

- ç»Ÿè®¡æŸä¸€åˆ—çš„å’Œ

```bash
awk '{sum+=$2}END{print sum}' fileName
```
------WebKitFormBoundaryyJI0qOsrnZcV8oWM--

2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/web/request.cpp:110 ready to upload
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:96 name = file
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:104 filename=
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/web/file_upload.cpp:131 upload content: application/octet-stream

## egrep å‡ ä¸ªå¸¸ç”¨çš„æ¡ˆä¾‹ï¼Œä¾¿äºç†è§£

```bash
//1. åŒ¹é…èº«ä»½è¯: 
    egrep -n '^[0-9]{17}[0-9X]$' filename  // å¦‚æœè¦åœ¨åŒä¸€è¡Œå¤´å°¾åŠ ä¸Š^å’Œ$

//2. åŒ¹é…è´¦å·æ˜¯å¦åˆæ³•ï¼ˆå­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰:
    egrep -n '^[a-zA-Z]\w{4,15}$' filename

//3. åŒ¹é…å¯†ç æ˜¯å¦åˆæ³•ï¼ˆå­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨8-18å­—èŠ‚ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼‰ï¼š
    egrep -n '^[a-zA-Z]\w{7,17}$' filename

//4. åŒ¹é…æ—¥æœŸ ex. 2022-11-23
    egrep -n '^[0-9]{4}-[0-9]{2}-[0-9]{2}$' filename

```
## sed ç¤ºèŒƒ
__(æ³¨æ„å¼€å§‹å’Œæœ«å°¾æœ‰æ²¡æœ‰ / )__

åŠ ä¸Š __-e__ å‚æ•°å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªå‘½ä»¤
åŠ ä¸Š __-n__ å‚æ•°å¯ä»¥åªæ‰“å°ä¿®æ”¹çš„è¡Œæ•°
åŠ ä¸Š __-r__ å‚æ•°ä½¿ç”¨æ‰©å±•æ­£åˆ™æ¯”å¦‚ m __,__ n
åŠ ä¸Š __-i__ å‚æ•°ç›´æ¥ä¿®æ”¹æ–‡æœ¬ï¼Œä¸åŠ çš„è¯åªæ‰“å°ä¿®æ”¹åçš„å†…å®¹ï¼Œä¸ä¿®æ”¹

- (^.\*)è¡¨ç¤ºè¡Œé¦–å¼€å§‹ä¸€ç›´å¾€åç›´åˆ°åˆ†å‰²ç¬¦å·ä¾‹å¦‚_ï¼Œ(.*$)è¡¨ç¤ºç¬¦å·å¼€å§‹ä¸€ç›´åˆ°è¡Œå°¾

__/ /__ ä¸­å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸€èˆ¬ä¸ç”¨ã€‚

```bash

2.sed -i '/pattern/i\insertPattern' fileName è¡¨ç¤ºåœ¨åŒ¹é…patternçš„å‰é¢æ’å…¥ä¸€è¡Œ insertPattern
3.sed -i '/pattern/a\insertPattern' fileName è¡¨ç¤ºåœ¨åŒ¹é…patternçš„åé¢æ’å…¥ä¸€è¡Œ
4.sed -i '/pattern/d' fileName åˆ é™¤
5.sed -i 's/pattern/newPattern/' fileName æ›¿æ¢æ¯è¡Œç¬¬ä¸€ä¸ªåŒ¹é… ï¼ˆå¦‚æœè¦åœ¨æ–°paè¡¨ç¤ºæ›¿æ¢å†…å®¹ç”¨&ï¼‰
  sed -i 's/pattern/newPattern/g' fileName æ›¿æ¢æ¯è¡Œæ‰€æœ‰åŒ¹é…
  sed -r '18,21s#(^.*)_(.*$)#\2_\1#' num.txt sé…åˆ()è¿›è¡Œæ“ä½œï¼Œè°ƒæ¢é¡ºåº, # å’Œ /æ˜¯ä¸€æ ·çš„
  sed -r -i '23,26s/(^.*)/\#\1/' num.txt èŒƒå›´æ·»åŠ ç¬¦å·  


6.sed -r '1,3c "hello world"' fileName è¡¨ç¤ºå°†1-3è¡Œç›´æ¥æ¢æˆhello worldï¼ˆä¸Šé¢çš„så‚æ•°æ›¿æ¢éƒ¨åˆ†å†…å®¹ï¼‰
7.sed -n '/pattern/p' fileName è¾“å‡ºåŒ¹é…çš„è¡Œ
//8.æœ€å‰é¢å‡å¦‚æ•°å­—ä¾‹å¦‚ sed -i '5s/...' (only 5)  æˆ– sed -i '5,10s/...'(from 5 to 10) è¡¨ç¤ºåªå¯¹æŒ‡å®šè¡Œå·è¿›è¡Œæ“ä½œã€‚
```

- å¸¸ç”¨çš„æ—¥å¿—æ–‡ä»¶æŸ¥è¯¢
``` bash
sed -n '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/p' fileName
```
- åˆ é™¤ä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼æ“ä½œ
```bash
sed -r '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/d' fileName
å¦‚æœé€—å·å³è¾¹å†™ $ è¡¨ç¤ºåˆ é™¤åˆ°æœ€åä¸€è¡Œ
```
- åŒä¸Šçš„èŒƒå›´æ›¿æ¢
```bash
sed -r '/2003-10-10 10:10:00/,/2003-10-10 10:10:10/c "hello world' fileName
```

## awk

- awkå‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹
(1)BEGINæŒ‡ä»¤ï¼Œ
(2)è¯»å–æ¯ä¸€è¡Œï¼Œåˆ¤æ–­è¯¥è¡Œæ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œè¿›è¡Œä»€ä¹ˆæ“ä½œã€‚ï¼ˆæŒ‰è¿™ä¸ªé€»è¾‘ç†è§£å°±å¥½ï¼‰
(3)ENDæŒ‡ä»¤ï¼Œ

- -Fè®¾å®šæŸ¥è¯¢åˆ†éš”ç¬¦ï¼Œ-vOFS= è®¾å®šè¾“å‡ºåˆ†éš”ç¬¦
```bash
// å‚æ•°Fåç´§è·Ÿç€åˆ†éš”ç¬¦ï¼ŒNRæ˜¯åˆ¤å®šçš„è¡Œæ•°ï¼Œ$n è¡¨ç¤ºç¬¬nä¸ªæ¨¡å—ï¼Œ$0 è¡¨ç¤ºå…¨éƒ¨ï¼Œ$NF è¡¨ç¤ºæœ€åä¸€ä¸ªæ¨¡å—ï¼ŒNRä¸å†™é»˜è®¤å¯¹å…¨éƒ¨è¡Œæ“ä½œ
awk -F: 'BEGIN{print "this is BEGIN"}NR==1{print $1}NR==4{print $2,$3}END{print "this is END"}' fileName
// ç¬¬ä¸€è¡Œåˆ°ç¬¬äº”è¡Œå¯ä»¥ç”¨ NR==1,NR==5 æˆ–è€… NR>=1&&NR<=5
```

```bash
// å¯ä»¥ç”¨//åƒsedä¸­ä¸€æ ·è¡¨è¾¾èŒƒå›´
awk -F: '/101010/,/202020/{operation}' fileName
```

**é‡ä¸­ä¹‹é‡**
```bash
// å¯¹æŒ‡å®šåˆ—è¿›è¡Œæ­£åˆ™åˆ¤å®šï¼Œå†å¯¹æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ‰€åœ¨çš„è¡Œè¿›è¡Œæ“ä½œã€‚
awk -F: '$4~/^s/{operation}' fileName
// ä¸æ”¯æŒ{m,n}ï¼Œéœ€è¦å…·ä½“åŒ– ç”¨ ||åˆ†éš”
awk -F: '($3~/^[0-9][0-9]$/||$3~/^[0-9]$/){print $1,$3}' passwd
```

- å¦‚æœæƒ³å…ˆç­›é€‰è¡Œå†ç­›é€‰åˆ—ä¸­çš„è¡Œï¼Œå¯ä»¥å°†sed å’Œ awk è”åˆï¼Œä½¿ç”¨ç®¡é“ï¼Œå¦‚ä¸‹
```bash
sed -nr '/101010/,/202020/p' passwd | awk -F: '$3~/^[0-9][0-9]$/{print $1, $3}'
```

**å¸¸è§ç”¨ä¾‹**
- è·å–æ–‡ä»¶è¡Œæ•°
```bash
awk '{sum++}END{print sum}' fileName
```

- ç»Ÿè®¡æŸä¸€åˆ—çš„å’Œ

```bash
awk '{sum+=$2}END{print sum}' fileName
```
------WebKitFormBoundaryyJI0qOsrnZcV8oWM--

2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:118 enter controller auto
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:125 path = /file/upload
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:145 classname = File, methodname = upload
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/web/server.cpp:170 Succeed getting controller and method
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/thread/task_dispatcher.cpp:14 task dispatcher assign task: b2e75370
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/thread/worker_thread.cpp:26 worker thread run: thread=b2e6a8c0, task=b2e75370
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:30 http task run
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:58 socket closed by peer : conn = 7
2024-07-06 23:52:48 DEBUG /home/breeze1/mvc-webserver/src/Task/http_task.cpp:101 http task destroy
